{% extends 'base.html' %}

{% block content %}
<h1>Welcome to Ready Now!</h1>
<br>
<div>
  <h2>What do you need to do before you're ready?</h2>
  <br>
  <form action='/timer' method='POST'>

    {% for activity in activities %}
    <input type='checkbox' name='activity' value={{activity[0]}}
        data-time={{activity[2]}}>{{ activity[1] }}</input>
    <br>
    {% endfor %}

    <br>
    <div>
      <b>Total time until you'll be ready:</b>
      <span id='total-time'></span>
      <!-- The total time should update as user checks boxes with AJAX -->
    </div>
    <br>
    <br>
    <input type='submit' value="Go!">
  </form>
</div>
{% endblock %}

{% block js %}
<script>
function calculateTime() {
  let activities = $('input:checked');
  console.log(activities)
  let totalTime = 0;

  for (let activity of activities) {
    totalTime += $(activity).data('time');
  }
  $('#total-time').html(totalTime + ' minutes');
}

$('input').on('click', calculateTime);
</script>
{% endblock %}